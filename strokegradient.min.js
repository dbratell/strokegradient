/*By Daniel Bratell*/"use strict";const makePathGradient=function(){function t(t,r,u,l){const f=i(t,r),h=i(r,u);let d=o(t,l,f),a=o(r,l,f),g=o(r,l,h),p=o(u,l,h);const v=[d];function y(t){v.push(t)}const w=2*l;if(f[0]==h[0]&&f[1]==h[1])y(a),y(r),y(g);else if(f[0]==-h[0]&&f[1]==-h[1]){const n=s(e(t,r));y(o(a,w,n)),y(o(r,w,n)),y(o(g,w,n))}else{const f=c(d,a,g,p),h=e(r,f),v=(e(t,r),e(r,u),d[0]!=a[0]?(f[0]-d[0])/(a[0]-d[0]):(f[1]-d[1])/(a[1]-d[1]));if(v>1){if(n(h)>w){const t=o(r,w,s(h)),n=i(r,t),e=c(d,a,t,o(t,1,n)),u=c(p,g,t,o(t,1,n));y(e),y(t),y(u)}else y(f)}else{let c=!1;if(v<0){c=v*n(e(t,r))/l<-1}if(c){y(o([(t[0]+u[0])/2,(t[1]+u[1])/2],l,s(h)))}else y(f)}}return y(p),v}function n(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function e(t,n){return[n[0]-t[0],n[1]-t[1]]}function o(t,n,e){return[t[0]+n*e[0],t[1]+n*e[1]]}function s(t){const e=n(t);return[t[0]/e,t[1]/e]}function c(t,n,e,o){const s=e[0],c=t[0],i=o[0]-s,r=n[0]-c,u=e[1],l=t[1],f=o[1]-u,h=n[1]-l,d=(r*(u-l)-h*(s-c))/(h*i-r*f);return[s+d*i,u+d*f]}function i(t,n){return s([t[1]-n[1],n[0]-t[0]])}return function(s,c,r,u,l,f,h){if(void 0===window.d3)throw"Requires d3.js to be loaded";const d=d3.select(s),a=d3.select(c);d.style("display","none");const g=function(t,n){const e=t.getTotalLength(),o=[],s=Math.floor(e/n)+1;for(let t=0;t<s;t++)o.push(t*e/s);return(s-1)*n<e&&o.push(e),o.map(function(n){const o=t.getPointAtLength(n),s=[o.x,o.y];return s.t=n/e,s})}(s,u),p=u/1e3,v=n(e(g[0],g[g.length-1]))<p,y=a.selectAll("path").data(function(t,n){const e=t.length-1,o=n?t[t.length-2]:void 0,s=n?t[1]:void 0;return d3.range(e).map(function(n){const e=[n>0?t[n-1]:o,t[n],t[n+1],n+2<t.length?t[n+2]:s];return e.t=(t[n].t+t[n+1].t)/2,e})}(g,v)).join("path").style("fill",h?"none":function(t){return r(t.t)}).attr("d",function(n){return function(n,e,s,c,r){const u=i(e,s),l=r/2,f=[];function h(t){f.push(t)}if(n){const o=t(n,e,s,l);3==o.length?h(o[1]):(h(o[2]),h(o[3]))}else{const t=o(e,l,u);h(t)}if(c){const n=t(e,s,c,l);3==n.length?h(n[1]):(h(n[1]),h(n[2]));const o=t(c,s,e,l);3==o.length?h(o[1]):(h(o[2]),h(o[3]))}else{const t=o(s,l,u),n=o(s,-l,u);h(t),h(n)}if(n){const o=t(s,e,n,l);3==o.length?h(o[1]):(h(o[1]),h(o[2]))}else{const t=o(e,-l,u);h(t)}let d=void 0;for(let t of f)void 0===d?d="M":d+="L",d+=t;return d+="Z"}(n[0],n[1],n[2],n[3],l)});f&&y.style("stroke",f?function(t){return r(t.t)}:"none").style("stroke-width",1/window.devicePixelRatio+"px").style("vector-effect","non-scaling-stroke")}}();